# Исключения в Java

## Ошибки

* Ошибки времени компиляции - происходят при нарушении синтаксиса языка программирования.

```JAVA
 public static void main(String[] args) {
	    int x = 10;
	    double y = 5;
	    int z = x + y;
    }
```

* Ошибки времени выполнения - возникают из-за неправильно построенной логики работы приложения, проблем с железом, проблем с входными данными.

```
              Throwable 
           |                      |
           V                      V
        Exception               Error
     |             |              |
     V             V              V
 RuntimeException IOException   VirtualMachineError
     |                            |
     V                            V
 -------------------           ------------------
 NullPointerException          OutOfMemoryError
 ArithmeticException           StackOverflowError

 IndexOutOfBoundsException
     |
     V
 ArrayIndexOutOfBoundsException
```

* java.lang.ArithmeticException - класс исключения, экземпляр которого выбрасывается при арифметических ошибках. 

* java.lang.NullPointerException - класс исключения, экземпляр которго выбрасывается при работе с объектной переменной, которая не указывает на реальный, созданный объект.

* java.lang.ArrayIndexOutOfBoundsException - класс исключения, экземляр которого выбрасывается при выходе за пределы массива.

* java.lang.OutOfMemoryError - класс исключения, экземпляр которго выбрасывается при недостатке памяти для JVM

* java.lang.StackOverflowError - класс исключения, экземпляр которого выбрасывается при переполнении стека вызовов.

* java.lang.IllegalArgumentException - потомок RuntimeException, стандартный класс исключения, используемый программистами.

* java.lang.FileNotFoundException - потомок IOException, выбрасывается при отсуствии файла на диске.

* java.lang.IOException - потомок Exception, выбрасывается при проблемах с вводом выводом.

## Механизм работы с исключениями

* Возникает исключительная ситуация, JVM создает объект класса исключения, далее, печает стек вызовов и останавливает программу.

## Класс Throwable - предок всех исключений

```JAVA
private String detailMessage; // детальное описание ошибки, например для ArithmeticException - / by 


private StackTraceElement[] stackTrace; // здесь хранится стек вызовов

private Throwable cause; // поле, которое хранит ссылку на причину возникновения ошибки - такая же ошибка
public final class StackTraceElement ...
    private String declaringClass;
    private String methodName;
    private String fileName;
    private int    lineNumber;
```

## Иерархия исключений

* Exception - предок всех более-менее стандартных ошибок во времений выполнения

* Error - ошибки, связанные с работой JVM, работы операционной системы и железом.

## Перехват исключений и их обработка

* try - данным ключевым словом помечается блок кода, который потенциально может сгенерировать исключение, в котором может возникнуть ошибка

* catch - здесь указывается тип ошибки, ее объект и поведение программы при возникновении исключения. 

* Конструкция try-catch позволяет оставить программу в рабочем состянии. 

* throw - оператор для выбрасывания исключений.

* Наследование позволяет определять свои исключения.

## Проверяемые исключения

* Проверяемые исключения - это исключения, объекты которых необходимо перехватывать (try-catch) или пробрасывать наверх (throws) в обязательном порядке (если вы вызываете метод, который потенциально выбрасывает проверяемое исключение). Если ваш метод выбрасывает данное исключение, вы обязаны заявить об этом в сигнатуре метода через ключевое слово throws.

* Все потомки класса Exception (кроме RuntimeException), а также Throwable и сам Exception - являются проверяемыми исключениями.

* В случае, когда вы пробрасываете проверяемое исключение наверх, вы заставляете пользователя вашего класса либо обработать, либо снова пробросить наверх. Следовательно, при низкой (или ленивой) квалификации программиста исключение может дойти до "клиентского места".

* При попадании на "проверяемое исключение" обработайте его НА МЕСТЕ и выбросите непроверяемое исключение поверх проверяемого.

* finally - ключевое слово, инструкция, внутри которой описывается набор команд, который выполняется всегда, независимо от поведения кода внутри try-catch