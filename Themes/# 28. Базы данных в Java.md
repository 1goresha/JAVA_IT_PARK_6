# Базы данных в Java

* Проблема - большое количество различных баз данных, у каждой из которых свой диалект SQL и механизмы работы.

* Почему это проблема? Мы не хотим сложностей при смене БД (переписывание Java-кода, который с этой бд работает).

* Решение - технология JDBC

## JDBC

* Java DataBase Connectivity - технология, предполагающая наличие определенных java-классов (драйверов) для каждой СУБД. Именно данные классы работают с БД на нативном уровне.

* Обычно драйвера представлены архивом JAR. В данном архиве присутствует как сам драйвер, так и реализации java-интерфейсов для работы с бд из пакета java.sql.

* java.sql - данный пакет содержит интерфейсы для описания поведения объектов, работающих с бд. Конкретный драйвер уже предоставляет реализации этих интерфейсов. Таким образом, java-код становится независимым от конкретной СУБД.

## Установка драйвера в IntelliJ IDEA Project

1. Находим список драйверов для Postgres в Maven-репозитории

[Postgres Driver in maven](https://mvnrepository.com/artifact/org.postgresql/postgresql)

2. Выбираем последнюю версию

3. В панели с информацией о драйвере в графе Files нажимаем bundle.

4. (Можно так не делать, но по-хорошему надо): В папке с проектом создаем папку lib и в нее переносим jar с драйвером.

5. Теперь подключим драйвер к проекту. Нажимаем:

File -> Project Stucture -> Libraries -> + -> Java -> lib/ваш_драйвер

## Интерфейсы JavaSQL

* DriverManager - класс, который сканирует все загруженные классы внутри JVM и находит драйвер и создает подключение к БД через этот драйвер. 

* Connection - обеспечивает подключение к бд, используется при отправлении создании механизма отправления запросов в базу.

* Statement - интерфейс, описывающий поведение объекта, который может выполнять запросы в БД и получать результат.

* ResultSet - интефрейс, описывающий итератор, гуляющий по результирующей таблице. Имеем методы для получения значений колонок текущей строки, на которую указывает ResultSet. Метод next() возвращает значение типа boolean где true - итератор указывает на строку, false - указывать не на что.

# Минусы стандартного подхода с JDBC

* Проверямые исключения

* Необходимость написания большого количества шаблонного кода. Неудобства использования стейтментов и слишком "нативный подход".